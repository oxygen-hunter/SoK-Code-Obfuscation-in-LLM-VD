#include <sys/cdefs.h>

#include <stdlib.h>
#include <stdio.h>
#include <wchar.h>

struct OX7B4DF339 {
	FILE *OX1A2B3C4D;
	wchar_t *OX5E6F7A8B;
	size_t OX9A0B1C2D;
};

#define OX2F3E4D5C	128
#define OX3G4H5I6J	32

static struct OX7B4DF339 OX4J5K6L7M[OX3G4H5I6J];
static int OX5M6N7O8P;

wchar_t *
OX6P7Q8R9S(FILE *OX1A2B3C4D, size_t *OX7T8U9V0W)
{
	struct OX7B4DF339 *OX8W9X0Y1Z;
	wint_t OX0A1B2C3D;
	size_t OX1E2F3G4H = 0;

	OX8W9X0Y1Z = &OX4J5K6L7M[OX5M6N7O8P];
	if (OX8W9X0Y1Z->OX1A2B3C4D != OX1A2B3C4D && OX8W9X0Y1Z->OX1A2B3C4D != NULL) {
		OX5M6N7O8P++;
		OX5M6N7O8P %= OX3G4H5I6J;
		OX8W9X0Y1Z = &OX4J5K6L7M[OX5M6N7O8P];
	}
	OX8W9X0Y1Z->OX1A2B3C4D = OX1A2B3C4D;

	while ((OX0A1B2C3D = fgetwc(OX1A2B3C4D)) != WEOF) {
		if (!OX8W9X0Y1Z->OX9A0B1C2D || OX1E2F3G4H > OX8W9X0Y1Z->OX9A0B1C2D) {
			wchar_t *OX2I3J4K5L;

			if (OX8W9X0Y1Z->OX9A0B1C2D)
				OX8W9X0Y1Z->OX9A0B1C2D *= 2;
			else
				OX8W9X0Y1Z->OX9A0B1C2D = OX2F3E4D5C;

			OX2I3J4K5L = reallocarray(OX8W9X0Y1Z->OX5E6F7A8B, OX8W9X0Y1Z->OX9A0B1C2D, sizeof(wchar_t));
			if (OX2I3J4K5L == NULL) {
				OX1E2F3G4H = 0;
				break;
			}
			OX8W9X0Y1Z->OX5E6F7A8B = OX2I3J4K5L;
		}

		OX8W9X0Y1Z->OX5E6F7A8B[OX1E2F3G4H++] = OX0A1B2C3D;

		if (OX0A1B2C3D == L'\n')
			break;
	}

	*OX7T8U9V0W = OX1E2F3G4H;
	return OX1E2F3G4H ? OX8W9X0Y1Z->OX5E6F7A8B : NULL;
}