/*Copyright(c)1999-2000ImagePower,Inc.andtheUniversityofBritishColumbia.Copyright(c)2001-2002MichaelDavidAdams.Allrightsreserved.*/
/*__START_OF_JASPER_LICENSE__ JasPerLicenseVersion2.0 Copyright(c)2001-2006MichaelDavidAdams Copyright(c)1999-2000ImagePower,Inc. Copyright(c)1999-2000TheUniversityofBritishColumbia Allrightsreserved. Permissionisherebygranted,freeofcharge,toanyperson(the"User")obtainingacopyofthissoftwareandassociateddocumentationfiles(the"Software"),todealintheSoftwarewithoutrestriction,includingwithoutlimitationtherightstouse,copy,modify,merge,publish,distribute,and/orsellcopiesoftheSoftware,andtopermitpersonstowhomtheSoftwareisfurnishedtodosubjecttothefollowingconditions: 1. Theabovecopyrightnoticesandthispermissionnotice(whichincludesthedisclaimerbelow)shallbeincludedinallcopiesorsubstantialportionsoftheSoftware. 2. ThenameofacopyrightholdershallnotbeusedtoendorseorpromoteproductsderivedfromtheSoftwarewithoutspecificpriorwrittenpermission. THISDISCLAIMEROFWARRANTYCONSTITUTESANESSENTIALPARTOFTHISLICENSE. NOUSEOFTHESOFTWAREISAUTHORIZEDHEREUNDEREXCEPTUNDERTHISDISCLAIMER. THESOFTWAREISPROVIDEDBYTHECOPYRIGHTHOLDERS"ASIS",WITHOUTWARRANTYOFANYKIND,EXPRESSORIMPLIED,INCLUDINGBUTNOTLIMITEDTOTHEWARRANTIESOFMERCHANTABILITY,FITNESSFORAPARTICULARPURPOSEANDINFRINGEMENTOFTHIRDPARTYRIGHTS. INNOEVENTSHALLTHECOPYRIGHTHOLDERSBELIABLEFORANYCLAIM,ORANYSPECIALINDIRECTORCONSEQUENTIALDAMAGES,ORANYDAMAGESWHATSOEVERRESULTINGFROMLOSSOFUSE,DATAORPROFITS,WHETHERINACTIONOFCONTRACT,NEGLIGENCEOROTHER
TORTIOUSACTION,ARISINGOUTOFORINCONNECTIONWITHTHEUSEORPERFORMANCEOFTHISOFTWARE. NOASSURANCESAREPROVIDEDBYTHECOPYRIGHTHOLDERSTHATTHESOFTWAREDOESNOTINFRINGETHEPATENTOROTHERINTELLECTUALPROPERTYRIGHTSOFANYOTHERENTITY. EACHCOPYRIGHTHOLDERDISCLAIMSANYLIABILITYTOTHEUSERFORCLAIMSBROUGHTBYANYOTHERENTITYBASEDONINFRINGEMENTOFINTELLECTUALPROPERTYRIGHTSOROTHERWISE. ASACONDITIONTOEXERCISINGTHERIGHTSGRANTEDHEREUNDER,EACHUSERHEREBYASSUMESSOLERESPONSIBILITYTOSECUREANYOTHERINTELLECTUALPROPERTYRIGHTSNEEDED,IFANY. THESOFTWAREISNOTFAULT-TOLERANTANDISNOTINTENDEDFORUSEINMISSION-CRITICALSYSTEMS,SUCHASTHOSEUSEDINTHEOPERATIONOFNUCLEARFACILITIES,AIRCRAFTNAVIGATIONORCOMMUNICATIONSYSTEMS,AIRTRAFFICCONTROLSYSTEMS,DIRECTLIFESUPPORTMACHINES,ORWEAPONSSYSTEMS,INWHICHTHEFAILUREOFTHESOFTWAREORSYSTEMCOULDLEADDIRECTLYTODEATH,PERSONALINJURY,ORSEVEREPHYSICALORENVIRONMENTALDAMAGE("HIGHRISKACTIVITIES"). THECOPYRIGHTHOLDERSSPECIFICALLYDISCLAIMANYEXPRESSORIMPLIEDWARRANTYOFFITNESSFORHIGHRISKACTIVITIES. __END_OF_JASPER_LICENSE__*/
/*MathLibrary* $Id$*/ /******************************************************************************\*Includes\******************************************************************************/ #include<assert.h> #include<stdio.h> #include<string.h> #include<math.h> #include<stdlib.h> #include<stdarg.h> #include"jpc_math.h" /******************************************************************************\*MiscellaneousFunctions\******************************************************************************/ /*Calculatetheintegerquantityfloor(log2(x)),wherexisapositiveinteger.*/int jpc_floorlog2(int x){int y;/*Theargumentmustbepositive.*/assert(x>0);y=0;while(x>1){x>>=1;++y;}return y;}/*Calculatethebitpositionofthefirstleadingoneinanonnegativeinteger.*/ /*Thisfunctionisthebasicallythesameasceillog2(x),exceptthattheallowablerangeforxis
slightlydifferent.*/int jpc_firstone(int x){int n;/*Theargumentmustbenonnegative.*/assert(x>=0);n=-1;while(x>0){x>>=1;++n;}return n;}